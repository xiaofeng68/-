function isMobile(t){return/^((\(\d{2,3}\))|(\d{3}\-))?(1[34578]\d{9})$/.test(t)}var detail={indexPop:"",init:function(){var t=this;t.floatNa(),t.tabCont(),t.togglePull(),t.preOnlineStatus(),t.buySee(),$(".notifyMe").on("click",t.notifyPop),$("#notifyBtn").on("click",t.subTel)},floatNa:function(){function t(){var t=$(this).scrollTop();t>o?(n.addClass("fixed-box"),i.addClass("floatna"),n.css({position:"fixed",top:0}),e.css({paddingTop:"50px"})):(n.removeClass("fixed-box"),i.removeClass("floatna"),n.css({position:"relative",top:0}),e.css({paddingTop:0}))}var n=$("#fixed"),i=$(".tabnav"),o=i.position().top,e=$(".tabcon");$(window).on("scroll",t)},tabCont:function(){$(".tabnav li:not(.show)").click(function(){var t=$(this);$(".tabnav li").eq(t.index()).addClass("active").siblings().removeClass("active"),$(".tabcon>div").removeClass("active").eq(t.index()).addClass("active")})},togglePull:function(){var t=$(".ke-outline div.catalog:not(:first)");t.find(".book").hide(),t.find(".toggle").addClass("rotate"),$(".toggle").on("click",function(){var t=$(this);t.parents(".catalog").find(".book").slideToggle(),t.toggleClass("rotate")})},preOnlineStatus:function(){var t=$(".catalog").find(".time2");t&&t.find("dd").hover(function(){var t=$(this);t.css({color:"#666"}).find("span").removeClass("icon-time2").css({color:"#999"}).text("即将上线")},function(){var t=$(this);t.find("span").text("").addClass("icon-time2")})},buySee:function(){var t,n=$(".play");n.children("dd").hover(function(){t=$(this),t.css({color:"#666"}).find("span").removeClass("icon-play").css({color:"#999"}).text("购买后学习")},function(){t.find("span").text("").addClass("icon-play")})},notifyPop:function(){detail.indexPop=layer.open({type:1,skin:"layui-layer-rim",area:["450px","340px"],title:"开课时通知我",content:$("#notifyPop")})},subTel:function(){var t=($(this),$("#nickName")),n=t.val().trim(),i=$("#mobile"),o=i.val().trim(),e=($("#notifyBtn"),$("#notifyPop").attr("data-id")),a=$("input[name='CSRF']").val();$("#notifyPop input").focus(function(){$(this).next(".err").text("")}),n.length>20?t.next(".err").text("姓名不能超过20个字符"):0==o.length?i.next(".err").text("手机号码不能为空"):isMobile(o)?$.ajax({type:"get",url:"/zhiye/notifyMe",data:{product_id:e,name:encodeURI(n,"UTF-8"),phone:o,CSRF:a},success:function(t){200==t.code?(layer.msg("提交成功！"),layer.close(detail.indexPop)):layer.msg("提交失败！")},error:function(){layer.msg("网络错误，再来一次吧！")},dataType:"json"}):i.next(".err").text("手机号格式不正确")}};$(function(){detail.init()});